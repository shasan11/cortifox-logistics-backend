# Generated by Django 5.1.2 on 2024-12-20 08:23

import core.getCurrentUser
import django.db.models.deletion
import simple_history.models
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('accounting', '0001_initial'),
        ('actor', '0001_initial'),
        ('crm', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Client',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('logo', models.ImageField(blank=True, null=True, upload_to='client_logo')),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False, unique=True)),
                ('name', models.CharField(blank=True, max_length=100, null=True, verbose_name='Name')),
                ('type', models.CharField(choices=[('individual', 'Individual'), ('organization', 'Organization')], max_length=20, verbose_name='Type')),
                ('contact_person', models.CharField(max_length=50, verbose_name='Contact Person')),
                ('phone', models.CharField(max_length=20, verbose_name='Phone')),
                ('email', models.EmailField(max_length=100, verbose_name='Email Address')),
                ('address1', models.TextField(verbose_name='Address 1')),
                ('address2', models.TextField(blank=True, null=True, verbose_name='Address 2')),
                ('province', models.CharField(max_length=50, verbose_name='Province')),
                ('country', models.CharField(max_length=50, verbose_name='Country')),
                ('updated', models.DateTimeField(auto_now=True)),
                ('active', models.BooleanField(default=True)),
                ('payment_terms', models.CharField(blank=True, choices=[('CIA', 'Cash in Advance (CIA)'), ('COD', 'Cash on Delivery (COD)'), ('NET30', 'Net 30'), ('NET60', 'Net 60'), ('EOM', 'End of Month (EOM)'), ('MFI', 'Month Following Invoice (MFI)'), ('INSTALLMENT', 'Installment Terms'), ('DUE_UPON_RECEIPT', 'Due Upon Receipt'), ('PARTIAL_PAYMENT', 'Partial Payment'), ('2_10_NET_30', '2/10 Net 30'), ('L_C', 'Letter of Credit (L/C)'), ('CONSIGNMENT', 'Consignment'), ('BILL_OF_EXCHANGE', 'Bill of Exchange'), ('PROGRESS_PAYMENTS', 'Progress Payments')], default='CIA', max_length=100, null=True)),
                ('contact', models.ManyToManyField(blank=True, to='crm.contacts')),
                ('currency', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='accounting.currency')),
                ('related_vendor', models.ManyToManyField(blank=True, to='actor.vendor')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='client_user', to=settings.AUTH_USER_MODEL)),
                ('user_add', models.ForeignKey(default=core.getCurrentUser.get_current_user, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL, verbose_name='added_by_client')),
            ],
            options={
                'verbose_name_plural': 'Clients',
            },
        ),
        migrations.CreateModel(
            name='ClientDocuments',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('document_name', models.CharField(max_length=50, verbose_name='Document Name')),
                ('document_no', models.CharField(blank=True, max_length=50, null=True, verbose_name='Document Id/Code')),
                ('file', models.FileField(upload_to='documents/%Y-%m-%d')),
                ('description', models.TextField(blank=True, null=True)),
                ('updated', models.DateTimeField(auto_now=True)),
                ('active', models.BooleanField(default=True)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='client_documents', to='clients.client')),
                ('user_add', models.ForeignKey(default=core.getCurrentUser.get_current_user, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='ClientType',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100, unique=True)),
                ('desc', models.TextField(blank=True, null=True)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('created', models.DateTimeField(auto_now_add=True)),
                ('updated', models.DateTimeField(auto_now=True)),
                ('active', models.BooleanField(default=True)),
                ('under', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sub_clients', to='clients.clienttype')),
                ('user_add', models.ForeignKey(default=core.getCurrentUser.get_current_user, editable=False, null=True, on_delete=django.db.models.deletion.PROTECT, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.AddField(
            model_name='client',
            name='clientGroup',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, to='clients.clienttype'),
        ),
        migrations.CreateModel(
            name='HistoricalClient',
            fields=[
                ('id', models.BigIntegerField(blank=True, db_index=True)),
                ('logo', models.TextField(blank=True, max_length=100, null=True)),
                ('uuid', models.UUIDField(db_index=True, default=uuid.uuid4, editable=False)),
                ('name', models.CharField(blank=True, max_length=100, null=True, verbose_name='Name')),
                ('type', models.CharField(choices=[('individual', 'Individual'), ('organization', 'Organization')], max_length=20, verbose_name='Type')),
                ('contact_person', models.CharField(max_length=50, verbose_name='Contact Person')),
                ('phone', models.CharField(max_length=20, verbose_name='Phone')),
                ('email', models.EmailField(max_length=100, verbose_name='Email Address')),
                ('address1', models.TextField(verbose_name='Address 1')),
                ('address2', models.TextField(blank=True, null=True, verbose_name='Address 2')),
                ('province', models.CharField(max_length=50, verbose_name='Province')),
                ('country', models.CharField(max_length=50, verbose_name='Country')),
                ('updated', models.DateTimeField(blank=True, editable=False)),
                ('active', models.BooleanField(default=True)),
                ('payment_terms', models.CharField(blank=True, choices=[('CIA', 'Cash in Advance (CIA)'), ('COD', 'Cash on Delivery (COD)'), ('NET30', 'Net 30'), ('NET60', 'Net 60'), ('EOM', 'End of Month (EOM)'), ('MFI', 'Month Following Invoice (MFI)'), ('INSTALLMENT', 'Installment Terms'), ('DUE_UPON_RECEIPT', 'Due Upon Receipt'), ('PARTIAL_PAYMENT', 'Partial Payment'), ('2_10_NET_30', '2/10 Net 30'), ('L_C', 'Letter of Credit (L/C)'), ('CONSIGNMENT', 'Consignment'), ('BILL_OF_EXCHANGE', 'Bill of Exchange'), ('PROGRESS_PAYMENTS', 'Progress Payments')], default='CIA', max_length=100, null=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('clientGroup', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='clients.clienttype')),
                ('currency', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='accounting.currency')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('user_add', models.ForeignKey(blank=True, db_constraint=False, default=core.getCurrentUser.get_current_user, editable=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL, verbose_name='added_by_client')),
            ],
            options={
                'verbose_name': 'historical client',
                'verbose_name_plural': 'historical Clients',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalClientDocuments',
            fields=[
                ('id', models.BigIntegerField(blank=True, db_index=True)),
                ('document_name', models.CharField(max_length=50, verbose_name='Document Name')),
                ('document_no', models.CharField(blank=True, max_length=50, null=True, verbose_name='Document Id/Code')),
                ('file', models.TextField(max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('updated', models.DateTimeField(blank=True, editable=False)),
                ('active', models.BooleanField(default=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='clients.client')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('user_add', models.ForeignKey(blank=True, db_constraint=False, default=core.getCurrentUser.get_current_user, editable=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical client documents',
                'verbose_name_plural': 'historical client documentss',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalClientType',
            fields=[
                ('id', models.BigIntegerField(blank=True, db_index=True)),
                ('name', models.CharField(db_index=True, max_length=100)),
                ('desc', models.TextField(blank=True, null=True)),
                ('code', models.CharField(db_index=True, max_length=20)),
                ('created', models.DateTimeField(blank=True, editable=False)),
                ('updated', models.DateTimeField(blank=True, editable=False)),
                ('active', models.BooleanField(default=True)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('under', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='clients.clienttype')),
                ('user_add', models.ForeignKey(blank=True, db_constraint=False, default=core.getCurrentUser.get_current_user, editable=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical client type',
                'verbose_name_plural': 'historical client types',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalRelatedConsignee',
            fields=[
                ('id', models.BigIntegerField(blank=True, db_index=True)),
                ('address', models.TextField(verbose_name='Address')),
                ('consignor_name', models.CharField(max_length=50, verbose_name='Consignor Name')),
                ('consigner_phone', models.CharField(max_length=10, verbose_name='Consigner Phone Number')),
                ('consigner_email', models.EmailField(max_length=254, verbose_name='Consigner Email Address')),
                ('remarks', models.TextField(blank=True, null=True)),
                ('province', models.CharField(max_length=50, verbose_name='Province')),
                ('country', models.CharField(max_length=50, verbose_name='Country')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('client', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='clients.client')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical related consignee',
                'verbose_name_plural': 'historical related consignees',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalTicket',
            fields=[
                ('id', models.BigIntegerField(blank=True, db_index=True)),
                ('title', models.CharField(max_length=55)),
                ('description', models.TextField()),
                ('opened_date', models.DateTimeField(blank=True, editable=False)),
                ('status', models.CharField(choices=[('OPEN', 'Open'), ('PENDING', 'Pending'), ('IN_PROGRESS', 'In Progress'), ('RESOLVED', 'Resolved'), ('CLOSED', 'Closed')], default='OPEN', max_length=20)),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('URGENT', 'Urgent')], default='MEDIUM', max_length=20)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('assigned_agent', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('client', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='clients.client')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical ticket',
                'verbose_name_plural': 'historical tickets',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='RelatedConsignee',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('address', models.TextField(verbose_name='Address')),
                ('consignor_name', models.CharField(max_length=50, verbose_name='Consignor Name')),
                ('consigner_phone', models.CharField(max_length=10, verbose_name='Consigner Phone Number')),
                ('consigner_email', models.EmailField(max_length=254, verbose_name='Consigner Email Address')),
                ('remarks', models.TextField(blank=True, null=True)),
                ('province', models.CharField(max_length=50, verbose_name='Province')),
                ('country', models.CharField(max_length=50, verbose_name='Country')),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='client_consignee', to='clients.client')),
            ],
        ),
        migrations.CreateModel(
            name='Ticket',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('title', models.CharField(max_length=55)),
                ('description', models.TextField()),
                ('opened_date', models.DateTimeField(auto_now_add=True)),
                ('status', models.CharField(choices=[('OPEN', 'Open'), ('PENDING', 'Pending'), ('IN_PROGRESS', 'In Progress'), ('RESOLVED', 'Resolved'), ('CLOSED', 'Closed')], default='OPEN', max_length=20)),
                ('priority', models.CharField(choices=[('LOW', 'Low'), ('MEDIUM', 'Medium'), ('HIGH', 'High'), ('URGENT', 'Urgent')], default='MEDIUM', max_length=20)),
                ('assigned_agent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='clients.client')),
            ],
        ),
        migrations.CreateModel(
            name='HistoricalTicketActivity',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('action', models.CharField(choices=[('STATUS_CHANGE', 'Status Change'), ('COMMENT', 'Comment'), ('ASSIGN_AGENT', 'Assign Agent')], max_length=20)),
                ('description_client', models.TextField()),
                ('description_user', models.TextField()),
                ('timestamp', models.DateTimeField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('created_by', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('ticket', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='clients.ticket')),
            ],
            options={
                'verbose_name': 'historical ticket activity',
                'verbose_name_plural': 'historical ticket activitys',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='TicketActivity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('STATUS_CHANGE', 'Status Change'), ('COMMENT', 'Comment'), ('ASSIGN_AGENT', 'Assign Agent')], max_length=20)),
                ('description_client', models.TextField()),
                ('description_user', models.TextField()),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('ticket', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activities', to='clients.ticket')),
            ],
        ),
    ]
