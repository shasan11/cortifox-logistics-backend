# Generated by Django 5.1.4 on 2025-01-17 06:29

import django.db.models.deletion
import simple_history.models
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('accounting', '0002_rename_desc_historicalpaymentmethod_description_and_more'),
        ('actor', '0002_delete_bookingagentvendor_delete_carriervendor_and_more'),
        ('crm', '0001_initial'),
        ('purchase', '0002_remove_expense_type'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.RemoveField(
            model_name='vendorpayment',
            name='shipment_job',
        ),
        migrations.RemoveField(
            model_name='expense',
            name='bank_accounts',
        ),
        migrations.RemoveField(
            model_name='expense',
            name='chart_of_accounts',
        ),
        migrations.RemoveField(
            model_name='expense',
            name='currency',
        ),
        migrations.RemoveField(
            model_name='expense',
            name='user_add',
        ),
        migrations.RemoveField(
            model_name='notesitem',
            name='notes',
        ),
        migrations.RemoveField(
            model_name='notesitem',
            name='user_add',
        ),
        migrations.RemoveField(
            model_name='vendorcreditdebitnote',
            name='currency',
        ),
        migrations.RemoveField(
            model_name='vendorcreditdebitnote',
            name='user_add',
        ),
        migrations.RemoveField(
            model_name='vendorcreditdebitnote',
            name='vendor',
        ),
        migrations.RemoveField(
            model_name='vendorpayment',
            name='bank_accounts',
        ),
        migrations.RemoveField(
            model_name='vendorpayment',
            name='currency',
        ),
        migrations.RemoveField(
            model_name='vendorpayment',
            name='user_add',
        ),
        migrations.RemoveField(
            model_name='vendorpayment',
            name='vendor',
        ),
        migrations.CreateModel(
            name='ExpenseCategory',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('parent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='subcategories', to='purchase.expensecategory')),
            ],
        ),
        migrations.CreateModel(
            name='Expenses',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('invoice_reference', models.CharField(max_length=100)),
                ('date', models.DateField()),
                ('due_date', models.DateField()),
                ('exchange_rate_to_npr', models.DecimalField(decimal_places=2, max_digits=15)),
                ('subtotal_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('non_taxable_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('taxable_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('discount_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('vat_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('created', models.DateTimeField(auto_now_add=True)),
                ('updated_date', models.DateField(auto_now=True)),
                ('currency', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='expenses_category', to='accounting.currency')),
                ('paid_from', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='expenses_paid_from', to='accounting.bankaccounts')),
                ('supplier', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='supplier_party', to='crm.contacts')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='expenses_user', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='ExpensesItems',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('description', models.TextField(blank=True, null=True)),
                ('amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('vat_choices', models.CharField(choices=[('13', '13% VAT'), ('zero', '0% VAT'), ('no_vat', 'No VAT')], max_length=100)),
                ('expensesitems', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='expenseitem', to='purchase.expenses')),
            ],
        ),
        migrations.CreateModel(
            name='HistoricalExpenses',
            fields=[
                ('id', models.BigIntegerField(blank=True, db_index=True)),
                ('invoice_reference', models.CharField(max_length=100)),
                ('date', models.DateField()),
                ('due_date', models.DateField()),
                ('exchange_rate_to_npr', models.DecimalField(decimal_places=2, max_digits=15)),
                ('subtotal_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('non_taxable_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('taxable_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('discount_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('vat_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('created', models.DateTimeField(blank=True, editable=False)),
                ('updated_date', models.DateField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('currency', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='accounting.currency')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('paid_from', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='accounting.bankaccounts')),
                ('supplier', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='crm.contacts')),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical expenses',
                'verbose_name_plural': 'historical expensess',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalVendorBills',
            fields=[
                ('id', models.BigIntegerField(blank=True, db_index=True)),
                ('invoice_reference', models.CharField(max_length=100)),
                ('date', models.DateField()),
                ('due_date', models.DateField()),
                ('exchange_rate_to_npr', models.DecimalField(decimal_places=2, max_digits=15)),
                ('subtotal_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('non_taxable_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('taxable_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('discount_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('vat_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('paid_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('remaining_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('bill_status', models.CharField(choices=[('draft', 'Draft'), ('pending', 'Pending'), ('sent', 'Sent'), ('due', 'Due'), ('overdue', 'Overdue'), ('partially_paid', 'Partially Paid'), ('paid', 'Paid'), ('processing', 'Processing'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('cancelled', 'Cancelled')], default='due', max_length=20)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('created', models.DateTimeField(blank=True, editable=False)),
                ('updated_date', models.DateField(blank=True, editable=False)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('currency', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='accounting.currency')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('vendor', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='actor.vendor')),
            ],
            options={
                'verbose_name': 'historical vendor bills',
                'verbose_name_plural': 'historical vendor billss',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='HistoricalVendorPayments',
            fields=[
                ('id', models.BigIntegerField(blank=True, db_index=True)),
                ('date', models.DateField()),
                ('remarks', models.TextField(blank=True, null=True)),
                ('due_date', models.DateField()),
                ('exchange_rate_to_npr', models.DecimalField(decimal_places=2, max_digits=15)),
                ('amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('bank_charges', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('tds_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('tds_type', models.CharField(max_length=100)),
                ('created', models.DateTimeField(blank=True, editable=False)),
                ('updated_date', models.DateField(blank=True, editable=False)),
                ('bill_status', models.CharField(choices=[('draft', 'Draft'), ('pending', 'Pending'), ('sent', 'Sent'), ('due', 'Due'), ('overdue', 'Overdue'), ('partially_paid', 'Partially Paid'), ('paid', 'Paid'), ('processing', 'Processing'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('cancelled', 'Cancelled')], default='due', max_length=20)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('currency', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='accounting.currency')),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
                ('paid_from', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='accounting.bankaccounts')),
                ('paid_to', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='accounting.bankaccounts')),
                ('tds_coa', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to='accounting.chartofaccounts')),
                ('user', models.ForeignKey(blank=True, db_constraint=False, null=True, on_delete=django.db.models.deletion.DO_NOTHING, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical vendor payments',
                'verbose_name_plural': 'historical vendor paymentss',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='VendorBills',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('invoice_reference', models.CharField(max_length=100)),
                ('date', models.DateField()),
                ('due_date', models.DateField()),
                ('exchange_rate_to_npr', models.DecimalField(decimal_places=2, max_digits=15)),
                ('subtotal_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('non_taxable_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('taxable_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('discount_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('vat_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('paid_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('remaining_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('bill_status', models.CharField(choices=[('draft', 'Draft'), ('pending', 'Pending'), ('sent', 'Sent'), ('due', 'Due'), ('overdue', 'Overdue'), ('partially_paid', 'Partially Paid'), ('paid', 'Paid'), ('processing', 'Processing'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('cancelled', 'Cancelled')], default='due', max_length=20)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('created', models.DateTimeField(auto_now_add=True)),
                ('updated_date', models.DateField(auto_now=True)),
                ('currency', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='vendorbills_currency', to='accounting.currency')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='vendor_bills_user', to=settings.AUTH_USER_MODEL)),
                ('vendor', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='vendorbills', to='actor.vendor')),
            ],
        ),
        migrations.CreateModel(
            name='VendorBillItems',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('description', models.TextField(blank=True, null=True)),
                ('rate', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('qty', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('taxes', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('discount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('vat_choices', models.CharField(choices=[('13', '13% VAT'), ('zero', '0% VAT'), ('no_vat', 'No VAT')], max_length=100)),
                ('total', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('vendorbills', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='vendorbillitems', to='purchase.vendorbills')),
            ],
        ),
        migrations.CreateModel(
            name='VendorPayments',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('date', models.DateField()),
                ('remarks', models.TextField(blank=True, null=True)),
                ('due_date', models.DateField()),
                ('exchange_rate_to_npr', models.DecimalField(decimal_places=2, max_digits=15)),
                ('amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('bank_charges', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('tds_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('tds_type', models.CharField(max_length=100)),
                ('created', models.DateTimeField(auto_now_add=True)),
                ('updated_date', models.DateField(auto_now=True)),
                ('bill_status', models.CharField(choices=[('draft', 'Draft'), ('pending', 'Pending'), ('sent', 'Sent'), ('due', 'Due'), ('overdue', 'Overdue'), ('partially_paid', 'Partially Paid'), ('paid', 'Paid'), ('processing', 'Processing'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('cancelled', 'Cancelled')], default='due', max_length=20)),
                ('currency', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='vendorpayments_currency', to='accounting.currency')),
                ('paid_from', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='payment_paid_from', to='accounting.bankaccounts')),
                ('paid_to', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='payment_paid_to', to='accounting.bankaccounts')),
                ('tds_coa', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='accounting.chartofaccounts')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.PROTECT, related_name='vendorpayment_user', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='VendorPaymentEntries',
            fields=[
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('vendor_bills', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='vendor_payment_entries', to='purchase.vendorbills')),
                ('vendor_payments', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='vendor_paymententries', to='purchase.vendorpayments')),
            ],
        ),
        migrations.DeleteModel(
            name='Costing',
        ),
        migrations.DeleteModel(
            name='Expense',
        ),
        migrations.DeleteModel(
            name='NotesItem',
        ),
        migrations.DeleteModel(
            name='VendorCreditDebitNote',
        ),
        migrations.DeleteModel(
            name='VendorPayment',
        ),
    ]
